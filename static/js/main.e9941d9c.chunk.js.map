{"version":3,"sources":["yelp-api/api.js","components/Search.jsx","components/loader/Loader.jsx","components/result/Result.jsx","App.js","index.js"],"names":["api_key","process","API_BASE_URL","get","path","queryParams","query","queryString","stringify","console","log","fetch","concat","headers","Authorization","Origin","withCredentials","Search","_ref","setSearchLocation","_usePlacesAutocomplet","usePlacesAutocomplete","requestOptions","location","lat","lng","radius","ready","value","_usePlacesAutocomplet2","suggestions","status","data","setValue","clearSuggestions","react_default","a","createElement","reach_combobox_esm","className","onSelect","_ref2","Object","asyncToGenerator","_regeneratorRuntime","mark","_callee","address","results","_yield$getLatLng","wrap","_context","prev","next","getGeocode","sent","getLatLng","t0","Error","stop","_x","apply","this","arguments","onChange","e","target","disabled","placeholder","map","_ref3","id","description","key","Loader","Result","result","_useState","useState","_useState2","slicedToArray","business","image_url","src","name","star_ratings_default","starDimension","rating","starRatedColor","numberOfStars","display_address","item","categories","title","review_count","price","photos","Fragment","url","href","App","_useLoadScript","useLoadScript","googleMapsApiKey","libraries","isLoaded","loadError","searchTerm","setSearchTerm","_useState3","_useState4","searchLocation","_useState5","undefined","_useState6","last1","setLast1","_useState7","_useState8","loading","setLoading","collectBottomOneId","App_regeneratorRuntime","total","offsetNum","searchParams","rawData","res","businesses","lastOne","term","longitude","latitude","limit","offset","sort_by","api","json","length","abrupt","error","fetchBusinessTotal","_callee2","_context2","flow","_callee3","_context3","type","autoComplete","onClick","preventDefault","handleSearch","Loader_Loader","Result_Result","ReactDOM","createRoot","document","getElementById","render","StrictMode","src_App"],"mappings":"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","file":"static/js/main.e9941d9c.chunk.js","sourcesContent":["import queryString from \"query-string\"\r\n\r\nconst api_key = process.env.REACT_APP_YELP_API_BEARER_TOKEN\r\nconst API_BASE_URL = \"https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3\"\r\n\r\n\r\nexport function get(path,queryParams){\r\n  const query = queryString.stringify(queryParams);//converts the params object into a query\r\n  console.log(query)\r\n  // `${API_BASE_URL}${path}?${query}`\r\n  return fetch(`${API_BASE_URL}${path}?${query}`,{\r\n    headers:{\r\n      Authorization:`Bearer ${api_key}`,\r\n      Origin:\"localhost\",\r\n      withCredentials: true,\r\n    }\r\n  })\r\n}","import React from 'react';\r\nimport { Combobox, ComboboxInput, ComboboxOption, ComboboxPopover,ComboboxList } from '@reach/combobox';\r\nimport usePlacesAutocomplete, {\r\n  getGeocode,\r\n  getLatLng\r\n} from 'use-places-autocomplete'; \r\nimport \"@reach/combobox/styles.css\"\r\n// import \"./search.css\"\r\n\r\nexport function Search({setSearchLocation}){\r\n  const {\r\n    ready, \r\n    value, \r\n    suggestions:{status,data},\r\n    setValue,\r\n    clearSuggestions\r\n  } = usePlacesAutocomplete({\r\n    requestOptions:{\r\n      location:{ lat:()=>51.5072178, lng:()=>-0.1275862},\r\n      radius:200*1000\r\n    }\r\n  })\r\n  return(\r\n  <Combobox \r\n  className='combobox'\r\n  onSelect={ \r\n    async (address)=>{\r\n      setValue(address,false);\r\n      clearSuggestions();\r\n      try{\r\n        const results = await getGeocode({address})\r\n        const {lat, lng} = await getLatLng(results[0]) //only the first result is used\r\n        setSearchLocation({address,lat,lng})\r\n      }\r\n      catch(error){\r\n        setSearchLocation(address)\r\n        console.log(Error)\r\n      }\r\n    }\r\n  }\r\n  >\r\n    <ComboboxInput \r\n      className='comboinput'\r\n      value={value} \r\n      onChange={(e)=>{setValue(e.target.value)}}\r\n      disabled={!ready}\r\n      placeholder=\"Newcastle upon Tyne, UK\"/>\r\n    <ComboboxPopover>\r\n      <ComboboxList>\r\n        {status===\"OK\" && data.map(({id,description})=>(\r\n        <ComboboxOption \r\n          key={id}\r\n          value={description}/>))}\r\n      </ComboboxList>\r\n    </ComboboxPopover>\r\n  </Combobox>\r\n  )\r\n  \r\n}\r\n","import React from 'react'\r\nimport \"./Loader.css\";\r\nexport default function Loader() {\r\n  return (\r\n    <div className='loader'></div>\r\n  )\r\n}\r\n","import React, { useState} from 'react'\r\nimport \"./Result.css\"\r\nimport StarRatings from 'react-star-ratings/build/star-ratings'\r\n\r\nconst sampleObj ={\r\n  \"id\": \"WavvLdfdP6g8aZTtbBQHTw\",\r\n  \"alias\": \"gary-danko-san-francisco\",\r\n  \"name\": \"Gary Danko\",\r\n  \"image_url\": \"https://s3-media2.fl.yelpcdn.com/bphoto/CPc91bGzKBe95aM5edjhhQ/o.jpg\",\r\n  \"is_claimed\": true,\r\n  \"is_closed\": false,\r\n  \"url\": \"https://www.yelp.com/biz/gary-danko-san-francisco?adjust_creative=wpr6gw4FnptTrk1CeT8POg&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_lookup&utm_source=wpr6gw4FnptTrk1CeT8POg\",\r\n  \"phone\": \"+14157492060\",\r\n  \"display_phone\": \"(415) 749-2060\",\r\n  \"review_count\": 5296,\r\n  \"categories\": [\r\n    {\r\n      \"alias\": \"newamerican\",\r\n      \"title\": \"American (New)\"\r\n    },\r\n    {\r\n      \"alias\": \"french\",\r\n      \"title\": \"French\"\r\n    },\r\n    {\r\n      \"alias\": \"wine_bars\",\r\n      \"title\": \"Wine Bars\"\r\n    }\r\n  ],\r\n  \"rating\": 4.5,\r\n  \"location\": {\r\n    \"address1\": \"800 N Point St\",\r\n    \"address2\": \"\",\r\n    \"address3\": \"\",\r\n    \"city\": \"San Francisco\",\r\n    \"zip_code\": \"94109\",\r\n    \"country\": \"US\",\r\n    \"state\": \"CA\",\r\n    \"display_address\": [\r\n      \"800 N Point St\",\r\n      \"San Francisco, CA 94109\"\r\n    ],\r\n    \"cross_streets\": \"\"\r\n  },\r\n  \"coordinates\": {\r\n    \"latitude\": 37.80587,\r\n    \"longitude\": -122.42058\r\n  },\r\n  \"photos\": [\r\n    \"https://s3-media2.fl.yelpcdn.com/bphoto/CPc91bGzKBe95aM5edjhhQ/o.jpg\",\r\n    \"https://s3-media4.fl.yelpcdn.com/bphoto/FmXn6cYO1Mm03UNO5cbOqw/o.jpg\",\r\n    \"https://s3-media4.fl.yelpcdn.com/bphoto/HZVDyYaghwPl2kVbvHuHjA/o.jpg\"\r\n  ],\r\n  \"price\": \"$$$$\",\r\n  \"hours\": [\r\n    {\r\n      \"open\": [\r\n        {\r\n          \"is_overnight\": false,\r\n          \"start\": \"1730\",\r\n          \"end\": \"2200\",\r\n          \"day\": 0\r\n        },\r\n        {\r\n          \"is_overnight\": false,\r\n          \"start\": \"1730\",\r\n          \"end\": \"2200\",\r\n          \"day\": 1\r\n        },\r\n        {\r\n          \"is_overnight\": false,\r\n          \"start\": \"1730\",\r\n          \"end\": \"2200\",\r\n          \"day\": 2\r\n        },\r\n        {\r\n          \"is_overnight\": false,\r\n          \"start\": \"1730\",\r\n          \"end\": \"2200\",\r\n          \"day\": 3\r\n        },\r\n        {\r\n          \"is_overnight\": false,\r\n          \"start\": \"1730\",\r\n          \"end\": \"2200\",\r\n          \"day\": 4\r\n        },\r\n        {\r\n          \"is_overnight\": false,\r\n          \"start\": \"1730\",\r\n          \"end\": \"2200\",\r\n          \"day\": 5\r\n        },\r\n        {\r\n          \"is_overnight\": false,\r\n          \"start\": \"1730\",\r\n          \"end\": \"2200\",\r\n          \"day\": 6\r\n        }\r\n      ],\r\n      \"hours_type\": \"REGULAR\",\r\n      \"is_open_now\": false\r\n    }\r\n  ],\r\n  \"transactions\": [],\r\n  \"special_hours\": [\r\n    {\r\n      \"date\": \"2019-02-07\",\r\n      \"is_closed\": null,\r\n      \"start\": \"1600\",\r\n      \"end\": \"2000\",\r\n      \"is_overnight\": false\r\n    }\r\n  ]\r\n}\r\n\r\nexport default function Result({result}) { \r\n  const [business, setBusiness] = useState(result)\r\n\r\n  \r\n  console.log(\"bussiness\",business)\r\n  if (!business) return <>nowt</>\r\n  return (\r\n    <div className='Result'>\r\n  \r\n        <div className=\" card\">\r\n        \r\n          {business.image_url ? \r\n          <img className=\"left\" src={business.image_url} />\r\n          :<img className=\"left\" src=\"https://img.freepik.com/free-photo/background-blurry-restaurant-shop-interior_1203-4031.jpg?t=st=1655196639~exp=1655197239~hmac=8f101edc2da95a653d738c8a6ec9182851487420ec2407831438ffc83705c2a7&w=1380\" />\r\n          }\r\n                  \r\n          <div className=\"right\">\r\n              <h1 className=\"business-name\">{business.name}</h1>\r\n                <div className='container top'>\r\n                  <StarRatings\r\n                    starDimension=\"30px\"\r\n                    rating={business.rating}\r\n                    starRatedColor=\"#1875D0\"\r\n                    numberOfStars={5}\r\n                    name='rating'\r\n                  />\r\n                  {business.location && <div className='address'>{business.location.display_address && business.location.display_address.map((item=>{return(<p className='address-line'>{item}</p>)}))}</div>}\r\n                </div>\r\n              <div className=\"separator\"></div>\r\n              <ul>\r\n                {business.categories.map(item=><li className='points'>{item.title}</li>)}\r\n                <li className='points'>{business.review_count} reviews</li>\r\n                {business.price &&<li className='points'> {business.price}</li>}\r\n              </ul>\r\n              {business.photos && \r\n              <>\r\n              <div className=\"separator\"></div>\r\n              <div className='gallery'>\r\n                { \r\n                business.photos.map((url)=>{\r\n                  return(\r\n                    <img className=\"thumbnail\" src={url}></img>\r\n                    )\r\n                  })}\r\n              </div>\r\n              </>}\r\n            </div>\r\n           <a href={business.url}><div className=\"fab\">Vist yelp page</div></a>\r\n        </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\nimport {\n  useLoadScript,\n} from \"@react-google-maps/api\"\n//import useSearchYelp from './yelp-api/useSearchYelp';\nimport * as api from \"./yelp-api/api\"\nimport './App.css';\nimport { Search } from './components/Search';\nimport Loader from './components/loader/Loader';\nimport Result from './components/result/Result';\n\n\n\n\nfunction App() {\n  const {isLoaded,loadError} = useLoadScript({\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\n    libraries:[\"places\"]\n  })\n  const [searchTerm, setSearchTerm] = useState(\"Barbershop\");\n  const [searchLocation, setSearchLocation] = useState(\"\");\n  const [last1,setLast1] = useState(undefined);\n  const [loading,setLoading] = useState(false);\n\n  const collectBottomOneId = async (total) => {\n    console.log(\"total\",total)\n    var offsetNum = 0\n    if (10 < total && total < 1000) {// checks if there if the total needs to be offsetted or not\n      offsetNum = (total - 10)\n    }else if (total > 1000){// the max the API can take is limit+offset =1000\n      offsetNum = 900\n    }\n    const searchParams = {\n      term:searchTerm,\n      longitude:searchLocation.lng,\n      latitude:searchLocation.lat,\n      limit:10,\n      offset:offsetNum,\n      sort_by:\"rating\",\n    }\n    console.log(searchParams)\n    \n    try{\n      const rawData = await api.get(\"/businesses/search\",searchParams)\n      const res = await rawData.json()\n      const businesses = res.businesses\n      const lastOne = res.businesses[businesses.length-1]\n      console.log(\"last one\", lastOne)\n      return lastOne\n    }\n    catch(e){\n      console.error(e)\n    }\n  }\n\n  const fetchBusinessTotal = async ()=> {\n    const searchParams = {\n      term:searchTerm,\n      longitude:searchLocation.lng,\n      latitude:searchLocation.lat,\n      limit:1, // only one as the only the number of results is important in this fetch.\n      sort_by:\"rating\",\n    }\n    try{\n      const rawData = await api.get(\"/businesses/search\",searchParams)\n      const res = await rawData.json()\n      const total = res.total\n      console.log(\"total\", total)\n      return total\n    }\n    catch(e){\n      console.error(e)\n    }\n  }\n\n  const flow = async () =>{\n    const res = await fetchBusinessTotal();\n    const last1 = await collectBottomOneId(res);\n    await setLast1(last1);\n    setLoading(false);\n  }\n  \n  function handleSearch(e){\n    e.preventDefault();\n    setLoading(true);\n    setLast1(undefined);\n    if (searchLocation===\"\"){\n      console.log(\"something went wrong\")//pormpt user to look up a location\n      return // exit the function\n    }    \n    flow();\n    console.log(last1)\n  }\n\n  if (loadError) return \"Error loading maps\";\n  if (!isLoaded) return \"Loading Maps\";\n\n  return (\n    <>\n   \n    <body>\n      <section className=\"hero\">\n        <div className='hero-card'>\n          <div className='hero-text'>\n            <h1>Find the worst rated places near you...</h1>\n            <h3>(according to yelp)*</h3>\n          </div>\n\n          <form className='search-form'>\n            <input className=\"searchbar\" id=\"term\" type=\"text\" autoComplete=\"off\" placeholder=\"Cafe, Barbershop, Pub, etc.\"  onChange={e=>setSearchTerm(e.target.value)}></input>\n            <Search className=\"searchbar\" id =\"location\" setSearchLocation={setSearchLocation}/>\n            <button onClick={e=>handleSearch(e)}>Search...</button>\n          </form>\n        </div>\n        <div>\n        </div>\n      </section>\n      <div className='target'>\n        {loading && <> \n          <div >\n          <Loader className=\"loader\"/>\n          </div>\n        </>} \n        {last1 &&\n        <div>\n        <Result result={last1}/>\n        </div>}\n        </div>\n      <footer className=\"main-footer\">\n\t\t<div className=\"footer-inner\">\n\t\t\t<span>*The Yelp API limits itself to 1000 results, so although\n         the program looks to get the last business in the returned request\n        (which is ordered by \"rating\" accorrding to Yelp), the \"worst\" place may be pretty good!</span>\n\t\t</div>\n    <div className=\"footer-inner\">\n\t\t\t<span>\n        <ul className='socials'>\n          <li><a href='https://www.linkedin.com/in/zakariyya-ahmed/'>LinkedIn</a></li>\n          <li><a href='https://github.com/zak1999'>GitHub</a></li>\n        </ul>\n      </span>\n\t\t</div>\n\t</footer>\n    </body>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}